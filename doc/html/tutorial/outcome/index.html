<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.29" />
    <meta name="description" content="Success-or-failure return types where failure can take two forms, expected/handled failure and unexpected/abort failure.">


    <title>outcome&lt;T, EC, EP&gt; :: Boost.Outcome documentation</title>
    <link rel="shortcut icon" href="/doc/libs/1_65_1/libs/outcome/doc/html/images/favicon.png" type="image/x-icon" />
    <link href="/doc/libs/1_65_1/libs/outcome/doc/html/css/nucleus.css" rel="stylesheet">
    <link href="/doc/libs/1_65_1/libs/outcome/doc/html/css/font-awesome.min.css" rel="stylesheet">
    <link href="/doc/libs/1_65_1/libs/outcome/doc/html/css/hybrid.css" rel="stylesheet">
    <link href="/doc/libs/1_65_1/libs/outcome/doc/html/css/featherlight.min.css" rel="stylesheet">
    <link href="/doc/libs/1_65_1/libs/outcome/doc/html/css/horsey.css" rel="stylesheet">
    
    <link href="/doc/libs/1_65_1/libs/outcome/doc/html/css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/doc/libs/1_65_1/libs/outcome/doc/html/css/bootstrap.min.css">
    <script src="/doc/libs/1_65_1/libs/outcome/doc/html/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    <link href="/doc/libs/1_65_1/libs/outcome/doc/html/css/local.css" rel="stylesheet">

  </head>
  <body class="" data-url="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/outcome/">
    <nav id="sidebar" class=""><div class="highlightable">
  <div id="header-wrapper">
    <div id="header"> 
	<p>Outcome 2.0 library documentation</p>
 


    </div><div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/doc/libs/1_65_1/libs/outcome/doc/html/js/lunr.min.js"></script>
<script type="text/javascript" src="/doc/libs/1_65_1/libs/outcome/doc/html/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "http:\/\/www.boost.org\/doc\/libs\/1_65_1\/libs\/outcome\/doc\/html";
</script>
<script type="text/javascript" src="/doc/libs/1_65_1/libs/outcome/doc/html/js/search.js"></script>

  </div>


    <ul class="topics">
            <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/" class="dd-item">
            <a href="/doc/libs/1_65_1/libs/outcome/doc/html/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/requirements/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/requirements/">
        <span>Prerequisites</span>
      </a>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/build/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/build/">
        <span>Build and install</span>
      </a>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/use-matrix/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/use-matrix/">
        <span>Decision matrix</span>
      </a>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/" class="dd-item parent">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/">
        <span>Tutorial</span>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </a>
        <ul>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/result/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/result/">
        <span>result&lt;T, EC&gt;</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/result/inspecting/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/result/inspecting/">
          <span>Inspecting result&lt;T, EC&gt;</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/result/try/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/result/try/">
          <span>TRY operations</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/outcome/" class="dd-item parent active">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/outcome/">
        <span>outcome&lt;T, EC, EP&gt;</span>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/outcome/inspecting/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/outcome/inspecting/">
          <span>Inspecting outcome&lt;T, EC, EP&gt;</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/">
        <span>Custom payloads</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/copy_file/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/copy_file/">
          <span>The Filesystem TS</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/copy_file2/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/copy_file2/">
          <span>Upgrading the Filesystem TS</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/copy_file3/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/payload/copy_file3/">
          <span>Auto-throwing filesystem_error</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/">
        <span>Default actions</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/udt-err/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/udt-err/">
          <span>User defined error types</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/happens1/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/happens1/">
          <span>-- What happens?</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/enums/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/enums/">
          <span>Error code enums</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/happens2/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/happens2/">
          <span>-- What happens?</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/happens3/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/happens3/">
          <span>-- Now what happens?</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/error-codes/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/error-codes/">
          <span>error_code</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/exception-ptr/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/exception-ptr/">
          <span>exception_ptr</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/void/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/void/">
          <span>void</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/unchecked/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/default-actions/unchecked/">
          <span>unchecked&lt;T, E&gt; and checked&lt;T, E&gt;</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/">
        <span>Result returning constructors</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/two-phase-init/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/two-phase-init/">
          <span>Two phase construction</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/file_handle/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/file_handle/">
          <span>A file handle</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/static-constructor/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/static-constructor/">
          <span>Phase 2 construction</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/metaprogrammg1/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/metaprogrammg1/">
          <span>Phase 3</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/metaprogrammg2/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/metaprogrammg2/">
          <span>construct&lt;T&gt;</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/metaprogrammg3/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/constructors/metaprogrammg3/">
          <span>Alternatives</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/">
        <span>Hooking events</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/keeping_state/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/keeping_state/">
          <span>Keeping state</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/adl_bridging/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/adl_bridging/">
          <span>ADL bridging</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/hook_result/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/hook_result/">
          <span>Hook result</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/poke_exception/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/poke_exception/">
          <span>Custom exception ptr</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/hook_outcome/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/hooks/hook_outcome/">
          <span>Hook outcome</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/">
        <span>Policies</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/anatomy/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/anatomy/">
          <span>Anatomy of a policy</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/cast/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/cast/">
          <span>Casting workaround</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/builtin/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/policies/builtin/">
          <span>Built-in policies</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/">
        <span>Using result&lt;T&gt; from C code</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/limitations/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/limitations/">
          <span>Limitations</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/example/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/example/">
          <span>Example C&#43;&#43; function</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/example2/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/example2/">
          <span>Calling it from C</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/variations/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/c-api/variations/">
          <span>Variations</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/">
        <span>Interoperation</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/problem/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/problem/">
          <span>Incommensurate E types</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/value-or-error/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/value-or-error/">
          <span>ValueOrError Concept</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/httplib/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/httplib/">
          <span>The HTTP library</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/tidylib/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/tidylib/">
          <span>The HTMLTidy library</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/filelib/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/filelib/">
          <span>The File I/O library</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app/">
          <span>The Application</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-httplib1/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-httplib1/">
          <span>Mapping the HTTP library into the Application 1/2</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-httplib2/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-httplib2/">
          <span>Mapping the HTTP library into the Application 2/2</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-filelib/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-filelib/">
          <span>Mapping the File I/O library into the Application</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-tidylib/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-map-tidylib/">
          <span>Mapping the HTMLTidy library into the Application</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-go/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/app-go/">
          <span>In use</span>
        </a>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/conclusion/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/interop/conclusion/">
          <span>Conclusion</span>
        </a>
    </li>
        </ul>
    </li>
      <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/error_code/" class="dd-item">
        <a href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/error_code/">
          <span>Custom error codes</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/faq/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/faq/">
        <span>Frequently asked questions</span>
      </a>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/videos/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/videos/">
        <span>Videos</span>
      </a>
    </li>
    <li data-nav-id="/doc/libs/1_65_1/libs/outcome/doc/html/history/" class="dd-item">
      <a href="/doc/libs/1_65_1/libs/outcome/doc/html/history/">
        <span>History</span>
      </a>
    </li>
        <section id="shortcuts">
                <li class="" role=""><a href="/doc/libs/1_65_1/libs/outcome/doc/html/standardese/standardese_entities.html" target="_blank" rel="noopener">API reference (standardese)</a></li>
                <li class="" role=""><a href="/doc/libs/1_65_1/libs/outcome/doc/html/doxygen/namespaceoutcome__v2__xxx.html" target="_blank" rel="noopener">API reference (doxygen)</a></li>
                <li class="" role=""><h3>More</h3><a href="https://github.com/ned14/outcome" target="_blank" rel="noopener"><i class='fa fa-github'></i> Standalone Outcome 2.0 github repo</a></li>
                <li class="" role=""><a href="/doc/libs/1_65_1/libs/outcome/doc/html/credits" target="_blank" rel="noopener"><i class='fa fa-bullhorn'></i> Acknowledgements</a></li>
        </section>
    </ul>


    <section id="footer"><center>

<a class="github-button" href="https://dedi4.nedprod.com/static/files/outcome-v2.0-source-latest.tar.xz" data-icon="octicon-cloud-download" aria-label="Download Outcome">Download</a>


<a class="github-button" href="https://github.com/ned14/outcome" data-icon="octicon-star" data-show-count="false" aria-label="Star Outcome on GitHub">Star</a>


<a class="github-button" href="https://github.com/ned14/outcome/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork Outcome on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/ned14/boost-outcome/edit/develop/doc/src/content/tutorial/outcome/_index.md" target="blank">
                <i class="fa fa-code-fork"></i>
                Edit page
              </a>
            </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='/doc/libs/1_65_1/libs/outcome/doc/html/'>Home</a> > <a href='/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/'>Tutorial</a> > outcome<T, EC, EP>

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#outcome"><code>outcome&lt;&gt;</code></a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>outcome&lt;T, EC, EP&gt;</h1>
          






<h2 id="outcome"><code>outcome&lt;&gt;</code></h2>

<p>Type <code>outcome&lt;T, EC, EP&gt;</code> can store either a <code>T</code> or an <code>EC</code> or an <code>EP</code>.
The first parameter (<code>T</code>) represents a value returned from functions upon success.
Both <code>EC</code> and <code>EP</code> represent the reason for function failure when function fails.
Conceptually, <code>outcome&lt;T, EC, EP&gt;</code> can be thought of as <code>variant&lt;T, EC, EP&gt;</code> or <code>variant&lt;T, variant&lt;EC, EP&gt;&gt;</code>, or <code>result&lt;T, variant&lt;EC, EP&gt;&gt;</code>.
<code>EC</code> defaults to <code>std::error_code</code> and <code>EP</code> defaults to <code>std::exception_ptr</code>. The distinction is made into two types, <code>EC</code> and <code>EP</code> for the following reasosns:</p>

<ol>
<li>The interface: <code>EC</code> is inspected in a different way that <code>EP</code>.</li>
<li>Performance: handling of <code>EC</code> is optimized for POD types.</li>
<li>Interoperability with <code>result&lt;T, EC&gt;</code>.</li>
</ol>

<p><code>outcome&lt;T, EC, EP&gt;</code> is useful for transporting exceptions across layers of the program that were never designed with exception safety in mind.</p>

<p>Consider a program consisting of three layers:</p>

<div class="mermaid" align="center" >
graph BT
    L3["Layer3"]
    L2["Layer2NX"] --> L3
    L1["Layer1"] --> L2
</div>

<p>The highest-level layer, <code>Layer3</code>, uses exceptions for signalling failures. The middle layer, <code>Layer2NX</code>,
was not designed with exception safety in mind and functions need to return information about failures in return value.
But down in the implementation details, in <code>Layer1</code>, another library is used that again throws exceptions. The goal is
to be able to transfer an exception thrown in <code>Layer1</code> through <code>Layer2NX</code>, which is not exception-safe, and be able to rethrow it in <code>Layer3</code>.</p>

<p>In <code>Layer1</code> we have a throwing function:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++">
<span class="s3e8">namespace</span> Layer1
{
  <span class="s3e8">auto</span> f() -&gt; <span class="s3ee">int</span>; <span class="s1770">// may throw
</span><span class="s1770"></span>}  
</code></pre>
</div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/using_outcome.cpp#L7" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p>In <code>Layer2NX</code> we cannot use exceptions, so its function <code>g</code> uses <code>result&lt;&gt;</code> to report failures:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++">
<span class="s3e8">namespace</span> Layer2NX
{
  <span class="s3e8">auto</span> g() <span class="s3e8">noexcept</span> -&gt; outcome::result&lt;<span class="s3ee">int</span>&gt; ;
}
</code></pre>
</div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/using_outcome.cpp#L19" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p>There is another function in <code>Layer2NX</code> that has to use both <code>Layer1::f</code> and <code>Layer2NX::g</code>.
It cannot use <code>Layer1::f</code> directly as the later may throw an exception, so it has to wrap it into a non-throwing function <code>Layer2NX::f</code>:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++">
<span class="s3e8">namespace</span> Layer2NX
{   
  <span class="s3e8">auto</span> f() <span class="s3e8">noexcept</span> -&gt; outcome::outcome&lt;<span class="s3ee">int</span>&gt; 
  <span class="s3e8">try</span> {
    <span class="s3e8">return</span> Layer1::f();
  }
  <span class="s3e8">catch</span> (...) {
    <span class="s3e8">return</span> std::current_exception();
  }
}    
</code></pre>
</div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/using_outcome.cpp#L34" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p>This wrapper funciton returns type <code>outcome&lt;int&gt;</code>. If an exception is thrown, it is caught by an <code>std::exception_ptr</code>. This <code>std::exception_ptr</code> is converted to <code>outcome&lt;T&gt;</code> upon return.
<code>outcome&lt;T, EC, EP&gt;</code> is convertible from <code>T</code>, <code>EC</code> and <code>EP</code> as long as such conversion is not ambiguous.</p>

<p>Now function <code>Layer2NX::fun</code> can be implemented with non-throwing <code>Layer2NX::f</code> and <code>Layer2NX::g</code>:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++">    
<span class="s3e8">namespace</span> Layer2NX
{  
  <span class="s3e8">auto</span> fun() <span class="s3e8">noexcept</span> -&gt; outcome::outcome&lt;<span class="s3ee">double</span>&gt; 
  {
    Resource* resource = <span class="s3e8">new</span> (std::nothrow) Resource;
    <span class="s3e8">if</span> (!resource)
        <span class="s3e8">return</span> std::errc::not_enough_memory;
      
    outcome::outcome&lt;<span class="s3ee">int</span>&gt; fr = Layer2NX::f();
    <span class="s3e8">if</span> (!fr) {
      <span class="s3e8">delete</span> resource;
      <span class="s3e8">return</span> fr.as_failure();                <span class="s1770">// #1
</span><span class="s1770"></span>    }
    
    <span class="s3ee">double</span> ans = resource-&gt;use(fr.value());
    
    outcome::result&lt;<span class="s3ee">int</span>&gt; gr = Layer2NX::g();
    <span class="s3e8">if</span> (!gr) {
      <span class="s3e8">delete</span> resource;
      <span class="s3e8">return</span> gr.as_failure();                <span class="s1770">// #2
</span><span class="s1770"></span>    }
    
    ans += resource-&gt;use(gr.value());
    
    <span class="s3e8">delete</span> resource;
    <span class="s3e8">return</span> ans;
  }
}
</code></pre>
</div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/using_outcome.cpp#L52" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p>In the example above, manually deleting <code>resource</code> represents a non-exception-safe code.
Typically it is not recommended to manually delete memory because it is hard to get right in case exceptions are thrown.
But when exceptions are known not to be thrown (e.g., when they are disabled) this recommendation is weakened.</p>

<p>#1. When we want to forward (return up) the <code>outcome&lt;&gt;</code> object representing failure, we use function <code>as_failure()</code> it returns type <code>failure_type&lt;EC, EP&gt;</code> which is convertible to any to <code>outcome&lt;T, EC, EP&gt;</code> for any <code>T</code>.</p>

<p>#2. We can similarly forward a failure from <code>result&lt;&gt;</code> again by calling <code>as_failure()</code>, the result will be converted to <code>outcome&lt;&gt;</code> preserving the information about function failure.</p>

<p>If the management of <code>resource</code> is automated through RAII, even with exceptions disabled, you can use <code>OUTCOME_TRY</code> to make the code more concise:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++">    
<span class="s3e8">namespace</span> Layer2NX
{  
  <span class="s3e8">auto</span> fun2() <span class="s3e8">noexcept</span> -&gt; outcome::outcome&lt;<span class="s3ee">double</span>&gt; 
  {
    std::unique_ptr&lt;Resource&gt; resource {<span class="s3e8">new</span> (std::nothrow) Resource};
    <span class="s3e8">if</span> (!resource)
      <span class="s3e8">return</span> std::errc::not_enough_memory;
    
    BOOST_OUTCOME_TRY (fr, Layer2NX::f());
    <span class="s3ee">double</span> ans = resource-&gt;use(fr);
    
    BOOST_OUTCOME_TRY (gr, Layer2NX::g());
    ans += resource-&gt;use(gr);
    
    <span class="s3e8">return</span> ans;
  }
}
</code></pre>
</div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/using_outcome.cpp#L83" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p>Statement <code>OUTCOME_TRY</code> works for <code>outcome</code> and you can also use it to return failure from <code>result&lt;&gt;</code> as <code>outcome&lt;&gt;</code> as shown in the second <code>OUTCOME_TRY</code>.</p>


<footer class=" footline" >
	
</footer>






        

      </div>
    </div>

    
 
    

    <div id="navigation">
        <a class="nav nav-prev" href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/result/try/" title="TRY operations"> <i class="fa fa-chevron-left"></i></a>
        <a class="nav nav-next" href="/doc/libs/1_65_1/libs/outcome/doc/html/tutorial/outcome/inspecting/" title="Inspecting outcome&lt;T, EC, EP&gt;" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>    

    <script src="/doc/libs/1_65_1/libs/outcome/doc/html/js/clipboard.min.js"></script>
<script src="/doc/libs/1_65_1/libs/outcome/doc/html/js/featherlight.min.js"></script>
<script src="/doc/libs/1_65_1/libs/outcome/doc/html/js/html5shiv-printshiv.min.js"></script>


<script src="/doc/libs/1_65_1/libs/outcome/doc/html/js/modernizr.custom.71422.js"></script>
<script src="/doc/libs/1_65_1/libs/outcome/doc/html/js/learn.js"></script>
<script src="/doc/libs/1_65_1/libs/outcome/doc/html/js/hugo-learn.js"></script>


<link href="/doc/libs/1_65_1/libs/outcome/doc/html/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script src="/doc/libs/1_65_1/libs/outcome/doc/html/mermaid/mermaid.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
    

  </body>
</html>
