<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>basic_outcome&amp;lt;T, EC, EP, NoValuePolicy&amp;gt; - Boost.Outcome documentation</title>
<link rel="stylesheet" href="../../css/boost.css" type="text/css">
<meta name="generator" content="Hugo 0.52 with Boostdoc theme">
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>

<link rel="icon" href="../../images/favicon.ico" type="image/ico"/>
<body><div id="boost-common-heading-doc" style="background: #574D74 url('../../images/header-bg.png') repeat-x top left;">
  <div class="heading-inner" style="background: url('../../images/header-fg.png') no-repeat top left;">
  <div class="heading-placard"></div>

  <h1 class="heading-title">
    <a href="../../">
      <img src="../../images/space.png" alt="Boost C++ Libraries" class="heading-logo" />
      <span class="heading-boost">Boost</span>
      <span class="heading-cpplibraries">C++ Libraries</span>
    </a>
  </h1>

  <p class="heading-quote">
    <q>...one of the most highly
    regarded and expertly designed C++ library projects in the
    world.</q> <span class="heading-attribution">&mdash; <a href=
    "http://www.gotw.ca/" class="external">Herb Sutter</a> and <a href=
    "http://en.wikipedia.org/wiki/Andrei_Alexandrescu" class="external">Andrei
    Alexandrescu</a>, <a href=
    "http://safari.awprofessional.com/?XmlId=0321113586" class="external">C++
    Coding Standards</a></span></p>
  </div>
</div>
<div id="boost-common-heading-doc-spacer"></div><div class="spirit-nav">
<a accesskey="p" href="../../reference/types.html"><img src="../../images/prev.png" alt="Prev"></a>
    <a accesskey="u" href="../../reference/types.html"><img src="../../images/up.png" alt="Up"></a>
    <a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="../../reference/types/basic_result.html"><img src="../../images/next.png" alt="Next"></a></div><div id="content">

  <div class="titlepage"><div><div><h1 style="clear: both"><code>basic_outcome&lt;T, EC, EP, NoValuePolicy&gt;</code></h1></div></div></div>
  <div class="toc"><dl class="toc">
<dt>
<dd><dl>
<dt>
<dd><dl>
<dt><a href="#design-rationale">Design rationale</a></dt>
<dt><a href="#public-member-type-aliases">Public member type aliases</a></dt>
<dt><a href="#protected-member-predicate-booleans">Protected member predicate booleans</a>
<dd><dl>
<dt><a href="#summary-of-standard-requirements-provided-https-en-cppreference-com-w-cpp-named-req">Summary of <a href="https://en.cppreference.com/w/cpp/named_req">standard requirements provided</a></a></dt>
</dl></dd></dt>
<dt><a href="#public-member-functions">Public member functions</a>
<dd><dl>
<dt><a href="#disabling-constructors">Disabling constructors</a></dt>
</dl></dd></dt>
</dl></dd></dt>
</dl></dd></dt>
</dl>
  </div>


<p>A type carrying one of (i) a successful <code>T</code> (ii) a disappointment <code>EC</code> (iii) a failure <code>EP</code> (iv) both a disappointment <code>EC</code> and a failure <code>EP</code>, with <code>NoValuePolicy</code> specifying what to do if one tries to read state which isn&rsquo;t there. Any one, two, or all of <code>T</code>, <code>EC</code> and <code>EP</code> can be <code>void</code> to indicate no value for that state is present. Detectable using 
    
    <b>API NOT FOUND IN DOCS <code>is_basic_outcome&lt;T&gt;</code></b>.</p>

<p><em>Requires</em>: Concept requirements if C++ 20, else static asserted:</p>

<ul>
<li>That trait <a href="../../reference/traits/type_can_be_used_in_basic_result.html" class="api-reference">type_can_be_used_in_basic_result&lt;R&gt;</a> is true for <code>T</code>, <code>EC</code> and <code>EP</code>.</li>
<li>That either <code>EC</code> is <code>void</code> or <code>DefaultConstructible</code>.</li>
<li>That either <code>EP</code> is <code>void</code> or <code>DefaultConstructible</code>.</li>
</ul>

<p><em>Namespace</em>: <code>BOOST_OUTCOME_V2_NAMESPACE</code></p>

<p><em>Header</em>: <code>&lt;boost/outcome/basic_outcome.hpp&gt;</code></p>

<p><em>Inclusions</em>: The very lightest weight of C and C++ header files:</p>

<ol>
<li><code>&lt;cstdint&gt;</code></li>
<li><code>&lt;initializer_list&gt;</code></li>
<li><code>&lt;iosfwd&gt;</code></li>
<li><code>&lt;new&gt;</code></li>
<li><code>&lt;type_traits&gt;</code></li>
<li><code>&lt;utility&gt;</code> (C++ 17 or later only, for 
<a href="https://en.cppreference.com/w/cpp/utility/in_place" class="api-reference" target="_blank"><i class="fa fa-book" aria-hidden="true"></i> std::in_place_type_t&lt;T&gt;</a>)</li>
<li>If C++ exceptions disabled and <code>BOOST_OUTCOME_DISABLE_EXECINFO</code> undefined only (used to print stack backtraces on &ldquo;exception throw&rdquo;):

<ol>
<li><code>&lt;sal.h&gt;</code> (Windows only)</li>
<li><code>&lt;stddef.h&gt;</code> (Windows only)</li>
<li><code>&lt;string.h&gt;</code> (Windows only)</li>
<li><code>&lt;execinfo.h&gt;</code> (POSIX only)</li>
</ol></li>
<li><code>&lt;cstdio&gt;</code></li>
<li><code>&lt;cstdlib&gt;</code></li>
<li><code>&lt;cassert&gt;</code></li>
</ol>

<p>This very light weight set of inclusion dependencies makes basic result suitable for use in global header files of very large C++ codebases.</p>

<h3 id="design-rationale">Design rationale</h3>

<p>To write</p>

<h3 id="public-member-type-aliases">Public member type aliases</h3>

<ul>
<li><code>value_type</code> is <code>T</code>.</li>
<li><code>error_type</code> is <code>EC</code>.</li>
<li><code>exception_type</code> is <code>EP</code>.</li>
<li><code>value_type_if_enabled</code> is <code>T</code> if construction from <code>T</code> is available, else it is a usefully named unusable internal type.</li>
<li><code>error_type_if_enabled</code> is <code>EC</code> if construction from <code>EC</code> is available, else it is a usefully named unusable internal type.</li>
<li><code>exception_type_if_enabled</code> is <code>EP</code> if construction from <code>EP</code> is available, else it is a usefully named unusable internal type.</li>
<li><code>rebind&lt;A, B = EC, C = EP, D = NoValuePolicy&gt;</code> is <code>basic_outcome&lt;A, B, C, D&gt;</code>.</li>
</ul>

<p>REST TO DO TOMORROW!</p>

<h3 id="protected-member-predicate-booleans">Protected member predicate booleans</h3>

<ul>
<li><p><code>predicate::constructors_enabled</code> is constexpr boolean true if decayed <code>value_type</code> and decayed <code>error_type</code> are not the same type.</p></li>

<li><p><code>predicate::implicit_constructors_enabled</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li>Trait <a href="../../reference/traits/is_error_type.html" class="api-reference">is_error_type&lt;E&gt;</a> is not true for both decayed <code>value_type</code> and decayed <code>error_type</code> at the same time.</li>
<li><code>value_type</code> is not implicitly constructible from <code>error_type</code> and <code>error_type</code> is not implicitly constructible from <code>value_type</code>.<br>OR<br>trait <a href="../../reference/traits/is_error_type.html" class="api-reference">is_error_type&lt;E&gt;</a> is true for decayed <code>error_type</code> and <code>error_type</code> is not implicitly constructible from <code>value_type</code> and <code>value_type</code> is an integral type.</li>
</ol></li>

<li><p><code>predicate::enable_value_converting_constructor&lt;R&gt;</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li>Decayed <code>R</code> is not this <code>basic_result</code> type.</li>
<li>Decayed <code>R</code> is not an <code>in_place_type_t</code>.</li>
<li>Trait <a href="../../reference/traits/is_error_type_enum.html" class="api-reference">is_error_type_enum&lt;E, Enum&gt;</a> is false for <code>error_type</code> and decayed <code>R</code>.</li>
<li><code>value_type</code> is implicitly constructible from <code>R</code> and <code>error_type</code> is not implicitly constructible from <code>R</code>.<br>OR<br><code>value_type</code> is the exact same type as decayed <code>R</code> and <code>value_type</code> is implicitly constructible from <code>R</code>.</li>
</ol></li>

<li><p><code>predicate::enable_error_converting_constructor&lt;R&gt;</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li>Decayed <code>R</code> is not this <code>basic_result</code> type.</li>
<li>Decayed <code>R</code> is not an <code>in_place_type_t</code>.</li>
<li>Trait <a href="../../reference/traits/is_error_type_enum.html" class="api-reference">is_error_type_enum&lt;E, Enum&gt;</a> is false for <code>error_type</code> and decayed <code>R</code>.</li>
<li><code>value_type</code> is not implicitly constructible from <code>R</code> and <code>error_type</code> is implicitly constructible from <code>R</code>.<br>OR<br><code>error_type</code> is the exact same type as decayed <code>R</code> and <code>error_type</code> is implicitly constructible from <code>R</code>.</li>
</ol></li>

<li><p><code>predicate::enable_error_condition_converting_constructor&lt;ErrorCondEnum&gt;</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li>Decayed <code>ErrorCondEnum</code> is not this <code>basic_result</code> type.</li>
<li>Decayed <code>ErrorCondEnum</code> is not an <code>in_place_type_t</code>.</li>
<li>Trait <a href="../../reference/traits/is_error_type_enum.html" class="api-reference">is_error_type_enum&lt;E, Enum&gt;</a> is true for <code>error_type</code> and decayed <code>ErrorCondEnum</code>.</li>
</ol></li>

<li><p><code>predicate::enable_compatible_conversion&lt;R, S, P&gt;</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li><code>basic_result&lt;R, S, P&gt;</code> is not this <code>basic_result</code> type.</li>
<li><code>R</code> is <code>void</code> OR <code>value_type</code> is explicitly constructible from <code>R</code>.</li>
<li><code>S</code> is <code>void</code> OR <code>error_type</code> is explicitly constructible from <code>S</code>.</li>
</ol></li>

<li><p><code>predicate::enable_inplace_value_constructor&lt;Args...&gt;</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li><code>value_type</code> is <code>void</code> OR <code>value_type</code> is explicitly constructible from <code>Args...</code>.</li>
</ol></li>

<li><p><code>predicate::enable_inplace_error_constructor&lt;Args...&gt;</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li><code>error_type</code> is <code>void</code> OR <code>error_type</code> is explicitly constructible from <code>Args...</code>.</li>
</ol></li>

<li><p><code>predicate::enable_inplace_value_error_constructor&lt;Args...&gt;</code> is constexpr boolean true if:</p>

<ol>
<li><code>predicate::constructors_enabled</code> is true.</li>
<li>Either, but not both, of <code>value_type</code> is explicitly constructible from <code>Args...</code> or <code>error_type</code> is explicitly constructible from <code>Args...</code>.</li>
</ol></li>
</ul>

<h4 id="summary-of-standard-requirements-provided-https-en-cppreference-com-w-cpp-named-req">Summary of <a href="https://en.cppreference.com/w/cpp/named_req">standard requirements provided</a></h4>

<ul>
<li><del><code>DefaultConstructible</code></del>, always deleted to force user to choose valued or errored for every result instanced.</li>
<li><code>MoveConstructible</code>, if both <code>value_type</code> and <code>error_type</code> implement move constructors.</li>
<li><code>CopyConstructible</code>, if both <code>value_type</code> and <code>error_type</code> implement copy constructors.</li>
<li><code>MoveAssignable</code>, if both <code>value_type</code> and <code>error_type</code> implement move constructors and move assignment.</li>
<li><code>CopyAssignable</code>, if both <code>value_type</code> and <code>error_type</code> implement copy constructors and copy assignment.</li>
<li><code>Destructible</code></li>
<li><code>TriviallyCopyable</code>, if both <code>value_type</code> and <code>error_type</code> are trivially copyable.</li>
<li><code>TrivialType</code>, if both <code>value_type</code> and <code>error_type</code> are trivial types.</li>
<li><code>LiteralType</code>, if both <code>value_type</code> and <code>error_type</code> are literal types.</li>

<li><p><code>StandardLayoutType</code>, if both <code>value_type</code> and <code>error_type</code> are standard layout types. If so, layout of <code>basic_result</code> in C is guaranteed to be:</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">struct</span> <span class="n">result_layout</span> <span class="p">{</span>
  <span class="n">value_type</span> <span class="n">value</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>
  <span class="n">error_type</span> <span class="n">error</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></li>

<li><p><code>EqualityComparable</code>, if both <code>value_type</code> and <code>error_type</code> implement equality comparisons with one another.</p></li>

<li><p><del><code>LessThanComparable</code></del>, not implemented due to availability of implicit conversions from <code>value_type</code> and <code>error_type</code>, this can cause major surprise (i.e. hard to diagnose bugs), so we don&rsquo;t implement these at all.
~ <code>Swappable</code></p></li>

<li><p><del><code>Hash</code></del>, not implemented as a generic implementation of a unique hash for non-valued items which are unequal would require a dependency on RTTI being enabled.</p></li>
</ul>

<p>Thus <code>basic_result</code> meets the <code>Regular</code> concept if both <code>value_type</code> and <code>error_type</code> are <code>Regular</code>, except for the lack of a default constructor. Often where one needs a default constructor, wrapping <code>basic_result</code> into 
<a href="https://en.cppreference.com/w/cpp/utility/optional" class="api-reference" target="_blank"><i class="fa fa-book" aria-hidden="true"></i> std::optional&lt;T&gt;</a> will suffice.</p>

<h3 id="public-member-functions">Public member functions</h3>

<h4 id="disabling-constructors">Disabling constructors</h4>

<ol class="children children-li"></li></ol>

<h4 id="copy-and-move-constructors-and-assignment-and-destructor">Copy and move constructors and assignment, and destructor</h4>

<ol class="children children-li"></li></ol>

<h4 id="converting-constructors">Converting constructors</h4>

<ol class="children children-li"></li></ol>

<h4 id="inplace-constructors">Inplace constructors</h4>

<ol class="children children-li"></li></ol>

<h4 id="tagged-constructors">Tagged constructors</h4>

<ol class="children children-li"></li></ol>

<h4 id="observers">Observers</h4>

<ol class="children children-li"></li></ol>

<h4 id="modifiers">Modifiers</h4>

<ol class="children children-li"></li></ol>

<h4 id="comparisons">Comparisons</h4>

<p>See above for why <code>LessThanComparable</code> is not implemented.</p>

<ol class="children children-li"></li></ol>







        </div><p><small>Last revised: January 25, 2019 at 01:51:37 UTC</small></p>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../../reference/types.html"><img src="../../images/prev.png" alt="Prev"></a>
    <a accesskey="u" href="../../reference/types.html"><img src="../../images/up.png" alt="Up"></a>
    <a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="../../reference/types/basic_result.html"><img src="../../images/next.png" alt="Next"></a></div></body>
</html>
