<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Home - Boost.Outcome documentation</title>
<link rel="stylesheet" href="./css/boost.css" type="text/css">
<meta name="generator" content="Hugo 0.52 with Boostdoc theme">
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>

<link rel="icon" href="./images/favicon.ico" type="image/ico"/>
<body><div id="boost-common-heading-doc" style="background: #574D74 url('images/header-bg.png') repeat-x top left;">
  <div class="heading-inner" style="background: url('images/header-fg.png') no-repeat top left;">
  <div class="heading-placard"></div>

  <h1 class="heading-title">
    <a href="./">
      <img src="./images/space.png" alt="Boost C++ Libraries" class="heading-logo" />
      <span class="heading-boost">Boost</span>
      <span class="heading-cpplibraries">C++ Libraries</span>
    </a>
  </h1>

  <p class="heading-quote">
    <q>...one of the most highly
    regarded and expertly designed C++ library projects in the
    world.</q> <span class="heading-attribution">&mdash; <a href=
    "http://www.gotw.ca/" class="external">Herb Sutter</a> and <a href=
    "http://en.wikipedia.org/wiki/Andrei_Alexandrescu" class="external">Andrei
    Alexandrescu</a>, <a href=
    "http://safari.awprofessional.com/?XmlId=0321113586" class="external">C++
    Coding Standards</a></span></p>
  </div>
</div>
<div id="boost-common-heading-doc-spacer"></div><div class="spirit-nav">

    <a accesskey="h" href="./index.html"><img src="./images/home.png" alt="Home"></a><a accesskey="n" href="./requirements.html"><img src="./images/next.png" alt="Next"></a></div><div id="content">
    

<h1 id="outcome-2-1-library">Outcome 2.1 library</h1>

<div>
  <div class="author">
    <h3 class="author"><span class="firstname">Niall</span> <span class="surname">Douglas</span></h3>
  </div>
</div>
<div><p class="copyright">Copyright &#169; 2014-2019 Niall Douglas <a href="./credits">and others</a></p></div>
<div><div class="legalnotice">
<a name="outcome.legal"></a><p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="./LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl class="toc">
  <dt><span class="section"><a href="./requirements.html">Prerequisites</a></span></dt>
    </dt></dd>
  <dt><span class="section"><a href="./build.html">Build and install</a></span></dt>
    </dt></dd>
  <dt><span class="section"><a href="./motivation.html">Motivation</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./motivation/exceptions.html">Exceptions</a></span></dt>
  <dt><span class="section"><a href="./motivation/errno.html">errno</a></span></dt>
  <dt><span class="section"><a href="./motivation/error_codes.html">Error codes</a></span></dt>
  <dt><span class="section"><a href="./motivation/std_error_code.html">std::error_code</a></span></dt>
  <dt><span class="section"><a href="./motivation/plug_error_code.html">Plugging a library into std::error_code</a></span></dt>
  <dt><span class="section"><a href="./motivation/narrow_contract.html">Narrow contracts</a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial.html">Tutorial</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/result.html">result&lt;&gt;</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/result/inspecting.html">Inspecting result<T, EC></a></span></dt>
  <dt><span class="section"><a href="./tutorial/result/try.html">TRY operations</a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial/outcome.html">outcome&lt;&gt;</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/outcome/inspecting.html">Inspecting outcome<T, EC, EP></a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial/no-value.html">No-value policies</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/no-value/custom.html">A custom no-value policy</a></span></dt>
  <dt><span class="section"><a href="./tutorial/no-value/builtin.html">Built-in policies</a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial/payload.html">Custom payloads</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/payload/copy_file.html">The Filesystem TS</a></span></dt>
  <dt><span class="section"><a href="./tutorial/payload/copy_file2.html">Upgrading the Filesystem TS</a></span></dt>
  <dt><span class="section"><a href="./tutorial/payload/copy_file3.html">Auto-throwing filesystem_error</a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial/constructors.html">Result returning constructors</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/constructors/two-phase-init.html">Two phase construction</a></span></dt>
  <dt><span class="section"><a href="./tutorial/constructors/file_handle.html">A file handle</a></span></dt>
  <dt><span class="section"><a href="./tutorial/constructors/static-constructor.html">Phase 2 construction</a></span></dt>
  <dt><span class="section"><a href="./tutorial/constructors/metaprogrammg1.html">Phase 3</a></span></dt>
  <dt><span class="section"><a href="./tutorial/constructors/metaprogrammg2.html">construct<T></a></span></dt>
  <dt><span class="section"><a href="./tutorial/constructors/metaprogrammg3.html">Alternatives</a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial/hooks.html">Hooking events</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/hooks/keeping_state.html">Keeping state</a></span></dt>
  <dt><span class="section"><a href="./tutorial/hooks/adl_bridging.html">ADL bridging</a></span></dt>
  <dt><span class="section"><a href="./tutorial/hooks/hook_result.html">Hook result</a></span></dt>
  <dt><span class="section"><a href="./tutorial/hooks/poke_exception.html">Custom exception ptr</a></span></dt>
  <dt><span class="section"><a href="./tutorial/hooks/hook_outcome.html">Hook outcome</a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial/c-api.html">Using result<T> from C code</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/c-api/limitations.html">Limitations</a></span></dt>
  <dt><span class="section"><a href="./tutorial/c-api/example.html">Example C++ function</a></span></dt>
  <dt><span class="section"><a href="./tutorial/c-api/example2.html">Calling it from C</a></span></dt>
  <dt><span class="section"><a href="./tutorial/c-api/variations.html">Variations</a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./tutorial/interop.html">Interoperation</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./tutorial/interop/problem.html">Incommensurate E types</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/value-or-error.html">ValueOrError Concept</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/httplib.html">The HTTP library</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/tidylib.html">The HTMLTidy library</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/filelib.html">The File I/O library</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/app.html">The Application</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/app-map-httplib1.html">Mapping the HTTP library into the Application <sup>1</sup>&frasl;<sub>2</sub></a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/app-map-httplib2.html">Mapping the HTTP library into the Application <sup>2</sup>&frasl;<sub>2</sub></a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/app-map-filelib.html">Mapping the File I/O library into the Application</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/app-map-tidylib.html">Mapping the HTMLTidy library into the Application</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/app-go.html">In use</a></span></dt>
  <dt><span class="section"><a href="./tutorial/interop/conclusion.html">Conclusion</a></span></dt>
        </dl>
    </dt></dd>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./reference.html">API reference</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/macros.html">Macros</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/macros/template.html">Constrained template macros</a></span></dt>
  <dt><span class="section"><a href="./reference/macros/version.html">Version macros</a></span></dt>
  <dt><span class="section"><a href="./reference/macros/disable_execinfo.html"><code>BOOST_OUTCOME_DISABLE_EXECINFO</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/nodiscard.html"><code>BOOST_OUTCOME_NODISCARD</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/requires.html"><code>BOOST_OUTCOME_REQUIRES(...)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/symbol_visible.html"><code>BOOST_OUTCOME_SYMBOL_VISIBLE</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/thread_local.html"><code>BOOST_OUTCOME_THREAD_LOCAL</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/throw_exception.html"><code>BOOST_OUTCOME_THROW_EXCEPTION(expr)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/try.html"><code>BOOST_OUTCOME_TRY(var, expr)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/tryv.html"><code>BOOST_OUTCOME_TRYV(expr)/BOOST_OUTCOME_TRY(expr)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/macros/tryx.html"><code>BOOST_OUTCOME_TRYX(expr)</code></a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./reference/concepts.html">Concepts</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/concepts/valueorerror.html"><code>ValueOrError&lt;T, E&gt;</code></a></span></dt>
  <dt><span class="section"><a href="./reference/concepts/valueornone.html"><code>ValueOrNone&lt;T&gt;</code></a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./reference/converters.html">Converters</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/converters/try_operation_return_as.html"><code>try_operation_return_as(expr)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/converters/value_or_error.html"><code>value_or_error&lt;T, U&gt;</code></a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./reference/traits.html">Traits</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/traits/has_error_code.html"><code>has_error_code&lt;T&gt;</code></a></span></dt>
  <dt><span class="section"><a href="./reference/traits/has_exception_ptr.html"><code>has_exception_ptr&lt;T&gt;</code></a></span></dt>
  <dt><span class="section"><a href="./reference/traits/is_basic_result.html"><code>is_basic_result&lt;T&gt;</code></a></span></dt>
  <dt><span class="section"><a href="./reference/traits/is_error_type.html"><code>is_error_type&lt;E&gt;</code></a></span></dt>
  <dt><span class="section"><a href="./reference/traits/is_error_type_enum.html"><code>is_error_type_enum&lt;E, Enum&gt;</code></a></span></dt>
  <dt><span class="section"><a href="./reference/traits/type_can_be_used_in_basic_result.html"><code>type_can_be_used_in_basic_result&lt;R&gt;</code></a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./reference/policies.html">Policies</a></span></dt>
    </dt></dd>
  <dt><span class="section"><a href="./reference/types.html">Types</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/types/basic_result.html"><code>basic_result&lt;T, E, NoValuePolicy&gt;</code></a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/types/basic_result/default.html"><code>basic_result() = delete</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/move_constructor.html"><code>basic_result(basic_result &amp;&amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/copy_constructor.html"><code>basic_result(const basic_result &amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/move_assignment.html"><code>basic_result &amp;operator=(basic_result &amp;&amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/copy_assignment.html"><code>basic_result &amp;operator=(const basic_result &amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/destructor.html"><code>~basic_result()</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/disabling_catchall.html"><code>basic_result(Args...) = delete</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/disabling_implicit_constructor.html"><code>basic_result(X &amp;&amp;) = delete</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/implicit_value_converting_constructor.html"><code>basic_result(R &amp;&amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/implicit_error_converting_constructor.html"><code>basic_result(S &amp;&amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/implicit_error_condition_converting_constructor.html"><code>basic_result(ErrorCondEnum &amp;&amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/explicit_valueorerror_converting_constructor.html"><code>explicit basic_result(ValueOrError&lt;T, E&gt; &amp;&amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/explicit_copy_converting_constructor.html"><code>explicit basic_result(const basic_result&lt;R, S, P&gt; &amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/explicit_move_converting_constructor.html"><code>explicit basic_result(basic_result&lt;R, S, P&gt; &amp;&amp;)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/explicit_inplace_value_constructor.html"><code>explicit basic_result(in_place_type_t&lt;value_type_if_enabled&gt;, Args ...)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/explicit_inplace_value_constructor_il.html"><code>explicit basic_result(in_place_type_t&lt;value_type_if_enabled&gt;, std::initializer_list&lt;U&gt;, Args ...)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/explicit_inplace_error_constructor.html"><code>explicit basic_result(in_place_type_t&lt;error_type_if_enabled&gt;, Args ...)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/explicit_inplace_error_constructor_il.html"><code>explicit basic_result(in_place_type_t&lt;error_type_if_enabled&gt;, std::initializer_list&lt;U&gt;, Args ...)</code></a></span></dt>
  <dt><span class="section"><a href="./reference/types/basic_result/implicit_inplace_value_error_constructor.html"><code>basic_result(A1 &amp;&amp;, A2 &amp;&amp;, Args ...)</code></a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./reference/types/in_place_type_t.html"><code>in_place_type_t&lt;T&gt;</code></a></span></dt>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./reference/aliases.html">Aliases</a></span></dt>
    </dt></dd>
  <dt><span class="section"><a href="./reference/functions.html">Functions</a></span></dt>
        <dd><dl>
  <dt><span class="section"><a href="./reference/functions/traits.html">Traits</a></span></dt>
    </dt></dd>
        </dl>
    </dt></dd>
        </dl>
    </dt></dd>
  <dt><span class="section"><a href="./faq.html">Frequently asked questions</a></span></dt>
    </dt></dd>
  <dt><span class="section"><a href="./videos.html">Videos</a></span></dt>
    </dt></dd>
  <dt><span class="section"><a href="./changelog.html">Changelog</a></span></dt>
    </dt></dd>
  <dt><span class="section"><a href="./history.html">History</a></span></dt>
    </dt></dd>


</dl>
</div>
<h2 class="title">Introduction</h2>

<p>Outcome is a set of tools for reporting and handling function failures in contexts where using C++ exception handling is unsuitable. Such contexts include:</p>

<ul>
<li><p>programs, or parts thereof, that are compiled with exceptions disabled;</p></li>

<li><p>parts of program that have a lot of branches depending on types of failures,
where if-statements are cleaner than try-catch blocks;</p></li>

<li><p>requirement that failure path of execution should not cost more than the successful path of execution;</p></li>

<li><p>situations, like in <a href="http://www.boost.org/doc/libs/release/libs/filesystem/doc/index.htm"><code>filesystem</code></a> library, where the decision whether the failure should be handled remotely
(use exceptions) or locally cannot be made inside the function and needs to be moved onto the caller,
and in the latter case launching stack unwinding is not desirable for the aforementioned reasons;</p></li>

<li><p>parts of the programs/frameworks that themselves implement exception handling and prefer
to not use exceptions to propagate failure reports across thread, tasks, fibers;</p></li>

<li><p>propagating exceptions trough layers that do not implement exception throw safety;</p></li>

<li><p>external requirement (such as company-wide policy) that failure handling paths are explicitly indicated in the code.</p></li>
</ul>

<p>Outcome addresses failure handling through returning a special type from functions, which is able to store either a successfully computed value (or <code>void</code>) or the information about failure. Outcome also comes with a set of idioms for dealing with such types.</p>

<h2 id="sample-usage">Sample usage</h2>

<p>One of the tools in the Outcome library is <code>result&lt;T&gt;</code>: it represents either a successfully computed value of type <code>T</code> or an <code>std::error_code</code> representing the reason for failure. You use it in the function&rsquo;s return type:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">auto</span> <span class="nf">read_data_from_file</span><span class="p">(</span><span class="n">string_view</span> <span class="n">path</span><span class="p">)</span> <span class="k">noexcept</span>
  <span class="o">-&gt;</span> <span class="n">outcome</span><span class="o">::</span><span class="n">result</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/intro_example.cpp#L20" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p>It is possible to inspect the state manually:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">if</span> <span class="p">(</span><span class="k">auto</span> <span class="n">rslt</span> <span class="o">=</span> <span class="n">read_data_from_file</span><span class="p">(</span><span class="s">&#34;config.cfg&#34;</span><span class="p">))</span>
  <span class="n">use_string</span><span class="p">(</span><span class="n">rslt</span><span class="p">.</span><span class="n">value</span><span class="p">());</span>                   <span class="c1">// returns string
</span><span class="c1"></span><span class="k">else</span>
  <span class="k">throw</span> <span class="n">LibError</span><span class="p">{</span><span class="n">rslt</span><span class="p">.</span><span class="n">error</span><span class="p">(),</span> <span class="s">&#34;config.cfg&#34;</span><span class="p">};</span> <span class="c1">// returns error_code
</span><span class="c1"></span></code></pre></div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/intro_example.cpp#L26" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p>Or, if this function is called in another function that also returns <code>result&lt;T&gt;</code> you can use a dedicated control statement:</p>

<div class="code-snippet"><div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">auto</span> <span class="nf">process</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">content</span><span class="p">)</span> <span class="k">noexcept</span>
  <span class="o">-&gt;</span> <span class="n">outcome</span><span class="o">::</span><span class="n">result</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">auto</span> <span class="nf">get_int_from_file</span><span class="p">(</span><span class="n">string_view</span> <span class="n">path</span><span class="p">)</span> <span class="k">noexcept</span>
  <span class="o">-&gt;</span> <span class="n">outcome</span><span class="o">::</span><span class="n">result</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>
<span class="p">{</span>
  <span class="n">BOOST_OUTCOME_TRY</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">read_data_from_file</span><span class="p">(</span><span class="n">path</span><span class="p">));</span>
  <span class="c1">// if control gets here read_data_from_file() has succeeded
</span><span class="c1"></span>  <span class="k">return</span> <span class="n">process</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>  <span class="c1">// decltype(str) == string
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><a href="https://github.com/ned14/boost-outcome/tree/master/doc/src/snippets/intro_example.cpp#L34" class="code-snippet-url" target="_blank">View this code on Github</a></div>


<p><code>BOOST_OUTCOME_TRY</code> is a control statement. If the returned <code>result&lt;T&gt;</code> object contains an error information, the enclosing function is immediately returned with <code>result&lt;U&gt;</code> containing the same failure information; otherwise an automatic object of type <code>T</code>
is available in scope.</p>

<div class="notices note" style="background: url('images/note.png') top left no-repeat padding-box padding-box;">
<div class="notices heading">note</div>
<div class="notices message"><p>This is the v2 Outcome designed in response to feedback from a <a href="https://lists.boost.org/boost-announce/2017/06/0510.php">Boost peer review held in
May 2017</a>. This library has successfully passed the second Boost peer review, and is currently expected to become part of the Boost official release distribution before the 1.70 release (Spring 2019).</p>
</div>
</div>



        </div><p><small>Last revised: December 10, 2018 at 20:32:00 UTC</small></p>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="./history.html"><img src="./images/prev.png" alt="Prev"></a>
    
    <a accesskey="h" href="./index.html"><img src="./images/home.png" alt="Home"></a><a accesskey="n" href="./requirements.html"><img src="./images/next.png" alt="Next"></a></div></body>
</html>
